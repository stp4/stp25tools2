% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/prepare_data.R
\name{prepare_data}
\alias{prepare_data}
\alias{prepare_data.formula}
\alias{prepare_data.data.frame}
\alias{make_my_list}
\alias{transform_data}
\alias{print.stp25data2}
\title{Prepare Data for Statistical Analysis}
\usage{
prepare_data(...)

\method{prepare_data}{formula}(
  x,
  data,
  ...,
  groups = NULL,
  na.action = NULL,
  drop.unused.levels = FALSE,
  is_for_plot = FALSE
)

\method{prepare_data}{data.frame}(
  data,
  ...,
  by = NULL,
  groups = NULL,
  na.action = NULL,
  drop.unused.levels = FALSE,
  is_for_plot = FALSE
)

make_my_list(
  data,
  measure_vars,
  sub_heading,
  by,
  groups,
  na.action = NULL,
  drop.unused.levels = FALSE
)

transform_data(formula, data, na.action = NULL, drop.unused.levels = FALSE)

\method{print}{stp25data2}(x, ...)
}
\arguments{
\item{...}{Additional arguments passed to methods:
- For formula method: currently unused
- For data frame method: variables to include in analysis (can include specifications)}

\item{x}{A formula specifying variables and structure (for formula method)}

\item{data}{data.frame.}

\item{groups}{Stratifizierung specification (formula or character)}

\item{na.action}{function.}

\item{drop.unused.levels}{logical}

\item{is_for_plot}{logical internal for auto_plot()}

\item{by}{Grouping specification (formula or character)}

\item{measure_vars}{Character vector of measurement variables}

\item{sub_heading}{Character vector of section headings}

\item{formula}{formula.}
}
\value{
A list with components for analysis including:
\itemize{
  \item `data`: Prepared data frame
  \item `measure.vars`: Analysis variables
  \item `group.vars`: Grouping variables
  \item `formula`: Analysis formula
  \item `measure`: Statistical measures specifications
  \item `measure.test`: Statistical tests specifications
  \item `digits`: Suggested rounding digits
  \item And other metadata for analysis
}

data.frame
}
\description{
A versatile function that prepares data for statistical analysis using formula interface.
Supports both formula and data frame input methods, handles variable specifications,
and manages grouping structures.

copy from stats::model.frame.default
}
\details{
The function provides two interfaces:

1. **Formula interface**:
   - Accepts formulas like `y ~ x` or `y1 + y2 ~ x1 + x2`
   - Supports `.` to include all variables
   - Handles variable specifications in brackets (e.g., `x[1,aov,median]`)
   - Processes headings specified as quoted strings

2. **Data frame interface**:
   - Accepts variables as separate arguments
   - Same support for specifications and headings
   - Grouping via `by` parameter

Both methods:
- Handle missing variables with informative warnings/errors
- Preserve variable labels and attributes
- Support complex variable specifications
}
\note{
This documentation was developed with assistance from DeepSeek AI.
}
\section{Methods}{

\describe{
  \item{`prepare_data.formula`}{Formula interface for data preparation}
  \item{`prepare_data.data.frame`}{Data frame interface for data preparation}
}
}

\examples{
df <- data.frame(
  u = factor(letters[1:3]),
  w = 1:3,
  x = 1:3,
  y = 1:3,
  z = 1:3
)

# Formula interface
prepare_data(~x + y + z, df)
prepare_data(x + y ~ z, df)
prepare_data(. ~ z, df)  # Using dot for all variables

# With specifications and headings
prepare_data(x[1,aov,median] + "Heading" + y ~ z, df)

# Data frame interface
prepare_data(df, x, y, by = ~z)
prepare_data(df, x[1,aov,median], "Heading", y, by = ~z)

# Handle missing variables
try(prepare_data(df, missing_var ~ z))
prepare_data(df, missing_var, by = ~z)  # Will warn but continue
}
\keyword{internal}
