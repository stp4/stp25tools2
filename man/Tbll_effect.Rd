% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tbll-regression-effect.R
\name{Tbll_effect}
\alias{Tbll_effect}
\title{Effect Displays for Regression Models}
\usage{
Tbll_effect(
  x,
  term = NULL,
  ...,
  include.se = FALSE,
  include.ci = TRUE,
  include.n = FALSE,
  digits = 2
)
}
\arguments{
\item{x}{A regression model object (e.g., from \code{lm()}, \code{glm()})}

\item{term}{Character vector or formula specifying the effect term(s) to display.
If \code{NULL} (default), all effects are displayed. Formulas allow complex
term specifications like \code{~ type * education + women}.}

\item{...}{Additional arguments passed to \code{effects::effect()} or
\code{effects::allEffects()}, such as \code{transformation = list(link = log, inverse = exp)}}

\item{include.se}{Logical indicating whether to include standard errors in output}

\item{include.ci}{Logical indicating whether to include confidence intervals in output}

\item{include.n}{Logical indicating whether to include case counts in output}

\item{digits}{Number of digits for formatting numeric values}
}
\value{
A data frame or list of data frames containing the effect displays with
  requested statistics. Each data frame includes:
  \itemize{
    \item Predictor variables
    \item Formatted average effects
    \item Confidence intervals (if requested)
    \item Case counts (if requested)
    \item Standard errors (if requested)
  }
}
\description{
A wrapper around \code{effects::effect()} and \code{effects::allEffects()} that
provides enhanced output formatting, including case counts, formatted values,
and confidence intervals.
}
\details{
Alternative: https://larmarange.github.io/broom.helpers/articles/marginal_tidiers.html
}
\examples{
library(car)  # For Prestige dataset

# Create regression model
model <- lm(prestige ~ type * education + income + women, data = Prestige)

# Display all effects with case counts
Tbll_effect(model, include.n = TRUE, digits = 0)

# Display specific interaction term
Tbll_effect(model, term = "type * education", include.n = FALSE, digits = 0)

# Display multiple terms using formula syntax
Tbll_effect(model, term = ~ type * education + women, digits = 0)

# Display individual terms (not recommended for interactions)
Tbll_effect(model, term = c("type", "education"), digits = 0)



DF <- data.frame(
  y=c(12, 15, 23, 44, 11, 44, 49, 27, 25, 8,
      11, 10, 28, 15, 34, 20, 31, 55, 15, 34,
      47, 11, 27, 9, 12, 15, 7, 15, 42, 14,
      19, 24, 20, 10, 38, 28, 36, 9, 31),
  iq =c(91, 95, 103, 116, 88, 116, 118, 106, 105, 82,
        88, 87, 107, 95, 111, 100, 109, 120, 95, 111,
        117, 88, 106, 85, 91, 95, 81, 95, 115, 94,
        99, 104, 100, 87, 113, 107, 112, 84, 109 )
)
DF$log.y =  log(DF$y)

fit.linear <- lm(y ~ iq, DF)
fit.log.y <- lm(log.y ~ iq, DF)
fit.model.log<- lm(log(y)~iq, DF)



Tbll_effect(fit.linear, "iq", include.ci = FALSE)
Tbll_effect(fit.log.y, "iq", include.ci = FALSE)
Tbll_effect(fit.model.log,"iq", include.ci = FALSE)


Tbll_effect(fit.log.y,"iq",include.ci = FALSE,
            transformation =
              list(link = log, inverse = exp)
)

Tbll_effect(fit.model.log,"iq",include.ci = FALSE,
            xlevels=list(iq= c(90,100,110)),
            transformation = list(link = log, inverse = exp)
)


effects::effect("iq", fit.model.log,
                xlevels=list(iq= c(90,100,110)),
                transformation =
                  list(link = log, inverse = exp)
)





# p1 <-
#   plot(effect("iq", fit.linear ,
#               partial.residuals = TRUE),
#        main = "y (linear)")
#
# p2 <-
#   plot(effect("iq", fit.log.y,
#               partial.residuals = TRUE),
#        main = "log")
#
# p3 <- plot(effect("iq", fit.log.y,
#                   partial.residuals = TRUE,
#                   transformation =
#                     list(link =  log, inverse = exp)),
#            main = "log + trans")
#
# p4 <- plot(effect("iq", fit.model.log ,
#                   partial.residuals = TRUE),
#            main = "log(y)")
#
# p5 <-   plot(effect("iq", fit.model.log ,
#                     partial.residuals = TRUE,
#                     transformation =
#                       list(link =  log, inverse = exp)),
#              main = "log(y) + trans")
#
# require(cowplot)
# plot_grid(p1, p4, p5, NULL, p2, p3, ncol = 3)
}
