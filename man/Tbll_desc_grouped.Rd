% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tbll_desc_grouped.R
\name{Tbll_desc_grouped}
\alias{Tbll_desc_grouped}
\title{Tabellen mit deskriptiven Statistiken und univariaten Tests}
\usage{
Tbll_desc_grouped(
  ...,
  include.label = TRUE,
  include.total = FALSE,
  include.test = FALSE,
  digits = NULL,
  use.level = 1,
  use.duplicated = FALSE
)
}
\arguments{
\item{...}{Eine Kombination aus:
- Variablennamen (z. B. `bmi, smoker, fev1.pr`)
- Optionalen Formeln für Gruppierung und Stratifizierung, z. B.
  `by = ~ sex` und `groups = ~ time`,
  oder in kompakter Form `bmi + smoker ~ sex | time`.}

\item{include.label}{Logisch; wenn `TRUE` (Standard), werden Variablenlabels
(sofern vorhanden) in der Tabelle angezeigt.}

\item{include.total}{Logisch; wenn `TRUE`, wird eine zusätzliche Spalte mit Gesamtergebnissen angezeigt.}

\item{include.test}{Logisch oder Zeichenkette; steuert, ob und welche Tests
durchgeführt werden. Mögliche Werte sind:
`"contest"`, `"cattest"`, `"ordtest"`, `"disttest"`, `"cortest"`, `"notest"`.}

\item{digits}{Anzahl der Nachkommastellen für numerische Werte.}

\item{use.level}{Gibt an, welche Ebene bei Faktoren berücksichtigt wird.}

\item{use.duplicated}{Logisch; steuert, ob doppelte Variablen berücksichtigt

Die Argumente \code{by} und \code{groups} definieren:
\itemize{
  \item \code{by}: Gruppierungsvariable, gegen die getestet wird (z. B. \code{sex})
  \item \code{groups}: Stratifizierungsvariable, nach der die Analysen getrennt werden (z. B. \code{time})
}}
}
\value{
Gibt ein \code{tibble} mit deskriptiven Statistiken und ggf. Signifikanztests zurück.
Typischerweise enthält die Ausgabe folgende Spalten:
\describe{
  \item{Items}{Variablenname oder Label}
  \item{Groups}{Name der Vergleichsgruppe}
  \item{Strata-Spalten}{Eine Spalte pro Level der Stratifizierung (z. B. \code{Ph1}, \code{Ph2}, \code{Ph3})}
}
}
\description{
Erstellt eine formatierte Übersichtstabelle mit Mittelwerten, Standardabweichungen
oder Prozentangaben, getrennt nach Gruppen (z. B. Geschlecht) und stratifiziert
nach einer weiteren Variable (z. B. Messzeitpunkt).

Abhängig vom Skalenniveau der Variablen werden automatisch geeignete
univariate Signifikanztests durchgeführt (z. B. \eqn{t}-Test, Wilcoxon-Test, Chi²-Test).

Die Funktion akzeptiert sowohl Formeln als auch Variablennamen als Argumente.
Es kann also entweder die lange oder kompakte Schreibweise verwendet werden:

```
Tbll_desc_grouped(
  h0, bmi, smoker, fev1.pr,
  by = ~ sex,
  groups = ~ time
)

# oder äquivalent:
Tbll_desc_grouped(
  h0 + bmi + smoker + fev1.pr ~ sex | time
)
```
}
\details{
Die Funktion dient der Erstellung von tabellarischen Übersichten über
kontinuierliche und kategoriale Variablen, mit optionaler Durchführung
univariater Tests zwischen Gruppen innerhalb einer Stratifikation.

Die zugrunde liegenden Tests werden automatisch anhand des Datentyps
(kontinuierlich, ordinal, kategorial) gewählt:

- **Kategoriale Variablen:** Chi²-Test oder Fisher-Test
- **Kontinuierliche Variablen:** t-Test, Wilcoxon-Test oder ANOVA, je nach Setting
- **Ordinale Variablen:** Kruskal-Wallis-Test

Wenn mehrere Tests innerhalb einer Tabelle durchgeführt werden, handelt es sich
um *multiples Testen*. Daher **sollte das Ergebnis ausschließlich explorativ interpretiert werden**.

**Wichtiger Hinweis:**
Bei multiplen Tests steigt die Wahrscheinlichkeit von α-Fehlern.
Es wird ausdrücklich empfohlen, die Ergebnisse mit Vorsicht zu interpretieren
oder entsprechende Korrekturen (z. B. Bonferroni) nachträglich anzuwenden.
}
\note{
Diese Funktion berechnet univariate Signifikanztests für mehrere Variablen,
typischerweise getrennt nach Gruppen und Strata. Die resultierenden p-Werte
sind nicht multipeltest-korrigiert und dürfen nicht als Beleg für tatsächliche
Unterschiede interpretiert werden.

Die Ergebnisse sind daher **rein explorativ** zu verstehen.
Die Berechnung erfolgt lediglich, weil solche Tests häufig gefordert werden –
sie sind jedoch **statistisch nicht empfehlenswert**.

Es existiert kein Korrekturverfahren, das die grundlegende Fehlinterpretation
der univariaten p-Werte „repariert“. Das Problem liegt nicht in der
fehlenden Adjustierung, sondern in der falschen Schlussfolgerung:
ein kleiner p-Wert bedeutet nicht automatisch, dass ein relevanter Unterschied
oder ein kausaler Zusammenhang besteht.

Zur kritischen Diskussion der Problematik vgl. u.a.:
- Wasserstein, R. L., & Lazar, N. A. (2016). *The ASA Statement on p-Values: Context, Process, and Purpose.*  
  The American Statistician, 70(2), 129–133. <doi:10.1080/00031305.2016.1154108>

**Kurz gesagt:** p-Werte können Hinweise auf Unterschiede geben, aber keine
verlässliche Evidenz für Relevanz oder Wahrheit liefern. Ihre unreflektierte
Nutzung in multiplen univariaten Analysen führt leicht zu Fehlinterpretationen.
}
\examples{
\dontrun{
# Beispiel 1: getrennte Argumente
set.seed(42)
DF_long <- tibble::tibble(
  id      = 1:100,
  sex     = factor(sample(c("male", "female"), 100, TRUE)),
  time    = factor(sample(c("Ph1", "Ph2", "Ph3"), 100, TRUE)),
  bmi     = round(rnorm(100, 25, 4), 1),
  smoker  = factor(sample(c("Never", "Former", "Current"), 100, TRUE)),
  fev1.pr = round(rnorm(100, 100, 15), 1),
)

# Beispiel

DF_long |>
  Tbll_desc_grouped(
    bmi[1],
    smoker,
    fev1.pr,
    by = ~ sex,
    groups = ~ time,
    include.test = TRUE
  )
}

}
\seealso{
\code{\link{prepare_data}}, \code{\link{Tbll_desc}}, \code{\link{Tbll_test}}
}
